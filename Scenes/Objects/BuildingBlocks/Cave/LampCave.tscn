[gd_scene load_steps=10 format=3 uid="uid://d4ewchetyfofr"]

[ext_resource type="Script" path="res://Code/scripts/ActivatableLight.gd" id="1_fhasg"]
[ext_resource type="ArrayMesh" uid="uid://dxqh4p07c8oau" path="res://Assets/Caves1/фонарь.obj" id="2_302wn"]
[ext_resource type="Script" path="res://Code/scripts/Light.gd" id="2_ttqdd"]
[ext_resource type="AudioStream" uid="uid://djw23q0lkxyxu" path="res://Assets/Sounds/Cave/Lamp_squeak1.mp3" id="4_qlrdj"]
[ext_resource type="AudioStream" uid="uid://c7xgha8ldm0eh" path="res://Assets/Sounds/Cave/Lamp_squeak2.mp3" id="5_2vj33"]
[ext_resource type="AudioStream" uid="uid://6k0ud1yr282c" path="res://Assets/Sounds/Cave/MetalHit.mp3" id="6_0yx00"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_iadso"]
height = 12.0
radius = 6.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_y5uob"]
radius = 0.7
height = 2.5

[sub_resource type="SphereShape3D" id="SphereShape3D_sil4f"]
radius = 5.5

[node name="LampCave" type="AnimatableBody3D" node_paths=PackedStringArray("light", "light_collider") groups=["golem_navigation_group"]]
collision_layer = 2
collision_mask = 2
script = ExtResource("1_fhasg")
light = NodePath("RigidBody3D/Light")
light_collider = NodePath("CollisionShape3D")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." groups=["golem_navigation_group"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 7, 0)
shape = SubResource("CylinderShape3D_iadso")

[node name="HingeJoint3D" type="HingeJoint3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -1.09985, 7.93665, 0)
node_b = NodePath("../RigidBody3D")
angular_limit/enable = true
angular_limit/upper = 2.0944
angular_limit/lower = -2.0944
angular_limit/bias = 0.99
motor/max_impulse = 0.01

[node name="RigidBody3D" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.09985, 7.93665, 0)
collision_layer = 2048
collision_mask = 2048
mass = 0.1
gravity_scale = 2.0
center_of_mass_mode = 1
center_of_mass = Vector3(0, -1, 0)
angular_damp_mode = 1
angular_damp = 0.99

[node name="MeshInstance3D" type="MeshInstance3D" parent="RigidBody3D"]
transform = Transform3D(0.7, 0, 0, 0, 0.7, 0, 0, 0, 0.7, -0.5, -6.87, 0)
cast_shadow = 0
mesh = ExtResource("2_302wn")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.87, 0)
shape = SubResource("CapsuleShape3D_y5uob")

[node name="Light" type="Area3D" parent="RigidBody3D" node_paths=PackedStringArray("light")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0998535, -1.93665, 0)
script = ExtResource("2_ttqdd")
is_active = true
light = NodePath("OmniLight3D")

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D/Light"]
shape = SubResource("SphereShape3D_sil4f")

[node name="OmniLight3D" type="OmniLight3D" parent="RigidBody3D/Light"]
light_color = Color(0.733738, 0.771739, 0.999999, 1)
omni_range = 8.0

[node name="AudioStreamPlayer1" type="AudioStreamPlayer" parent="."]
stream = ExtResource("4_qlrdj")
volume_db = -20.0
pitch_scale = 1.1
bus = &"Sound"
parameters/looping = false

[node name="AudioStreamPlayer2" type="AudioStreamPlayer" parent="."]
stream = ExtResource("5_2vj33")
volume_db = -20.0
pitch_scale = 1.1
bus = &"Sound"
parameters/looping = false

[node name="AudioStreamPlayer3" type="AudioStreamPlayer" parent="."]
stream = ExtResource("6_0yx00")
volume_db = -20.0
bus = &"Sound"
parameters/looping = false

[connection signal="body_entered" from="RigidBody3D/Light" to="RigidBody3D/Light" method="_on_body_entered"]
[connection signal="body_exited" from="RigidBody3D/Light" to="RigidBody3D/Light" method="_on_body_exited"]
